{% extends "layout.html" %}

{% block head %}
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&icons=loupe,circle,restart_alt,square_foot,invert_colors,zoom_in,zoom_out" />
    <link rel="stylesheet" href="../static/viewer.css">
{% endblock %}

{% block title %}
    Upload
{% endblock %}

{% block nav_item %}
    <li class="nav-item">
        <a class="nav-link active" aria-current="page" href="/">Home</a>
    </li>
    <li class="nav-item nav-link desactive flex-grow-1">Viewing: {{ filename }}</li>
    <li class="nav-item">
        <button id="export_btn" class="btn btn-primary" type="submit">Export as PNG</button>
    </li>
{% endblock %}

{% block main %}

    <div id="container-total" class="container-total">
        
        <div class="tools_container">
            <div class="slice_container tool_container">
                <h3 class="fs-6">Slice Control</h3>
                <div class="range_flex">
                    <p id="text_slice" class="p_label">Slice: <output id="value_slice">0</output></p>
                    <input id="slice" name="slice_index" type="range" min="0" step="1" value="0">
                </div>
            </div>
            <div class="windowing_container tool_container">
                <h3 class="fs-6">Medical Windowing</h3>
                <div class="windowing_flex">
                    <p id="window_center_label" class="p_label">Window Center (Brigth): <output id="value_wc">500</output></p>
                    <input type="range" id="window_center" name="window_center" 
                           min="-1000" max="3000" step="10" value="500">

                    <p id="window_width_label" class="p_label">Window Width (Contrast): <output id="value_ww">2000</output></p>
                    <input type="range" id="window_width" name="window_width" 
                           min="1" max="4000" step="10" value="2000">
                </div>
            </div>
            <div class="img_manipulation_container tool_container">
                <h3 class="fs-6">Image Manipulation Tools</h3>
                <div class="manipulation__btn_flex btn_flex">
                    <div class="btn_container">
                        <button id="zoom_in-btn">
                            <span class="material-symbols-outlined btn_name">
                            zoom_in
                            </span>
                        </button>
                        <p>Zoom</p>
                        <p>in</p>
                    </div>

                    <div class="btn_container">
                        <button id="zoom_out-btn">
                            <span class="material-symbols-outlined btn_name">
                            zoom_out
                            </span>
                        </button>
                        <p>Zoom</p>
                        <p>out</p>
                    </div>

                    <div class="btn_container">
                        <button id="lut-btn">
                            <span class="material-symbols-outlined btn_name">
                            invert_colors
                            </span>
                        </button>
                        <p>LUT</p>
                    </div>

                    <div class="btn_container">
                        <button id="reset-btn">
                            <span class="material-symbols-outlined btn_name">
                            restart_alt
                            </span>
                        </button>
                        <p>Restart</p>
                    </div>
                </div>
            </div>

            <div class="metrics_tools_container tool_container">
                <h3 class="fs-6">Measurement Tools</h3>
                <div class="metrics_btn_flex btn_flex">
                    <div class="btn_container">
                        <button id="ruler_btn">
                            <span class="material-symbols-outlined btn_name">
                            square_foot
                            </span>
                        </button>
                        <p>Ruler</p>
                    </div>

                    <div class="btn_container">
                        <button id="hu_btn">
                            <span class="material-symbols-outlined btn_name">
                            loupe
                            </span>
                        </button>
                        <p>Probe</p>
                        <p>value</p>
                    </div>

                    <div class="btn_container">
                        <button id="roi_btn">
                            <span class="material-symbols-outlined btn_name">
                            circle
                            </span>
                        </button>
                        <p>ROI</p>
                    </div>
                </div>
            </div>

            <div class="info_container tool_container">
                <h3 class="fs-6">Image Information</h3>
                <div class="info_lists_container">
                    <ul class="info_list1">
                        <li id="modality" class="li_info"></li>
                        <li id="body_part" class="li_info"></li>
                        <li id="series_description" class="li_info"></li>
                    </ul>
                    <ul class="info_list2">
                        <li id="study_description" class="li_info"></li>
                        <li id="admitting_diagnoses" class="li_info"></li>
                    </ul>
                </div>
            </div>

        </div>

        <div id="error"></div>

        <div class="img-container" id="img-container">
            <canvas id="dicom_image"></canvas>
        </div>
    </div>
    
    
{% endblock %}

{% block script %}
    <script src="../static/viewer.js"></script>
{% endblock %}